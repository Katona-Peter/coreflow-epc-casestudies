{% extends "base.html" %}

{% block content %}

<!-- Custom CSS for image hover effects -->
<style>
.case-study-image {
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    cursor: pointer;
    will-change: transform;
}

.case-study-image:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 16px rgba(0,0,0,0.3) !important;
}

.card-left {
    overflow: hidden;
    position: relative;
}

/* Ensure pagination is visible */
.pagination {
    margin: 2rem 0;
    padding: 1rem 0;
}
</style>

<!-- index.html content starts here -->
<div class="container-fluid" style="padding: 0 15px; margin-bottom: 2rem;">
    <div class="row">
        <div class="col-12 mt-3 left">
            <div class="row">
                {% for casestudy in casestudy_list %}
                <div class="col-md-6 mb-4 d-flex">
                    {% load static %}
                    {% if casestudy.casestudyimage %}
                        <div class="card card-blue-margin h-100 w-100" style="background-image: url('{% static 'images/' %}{{ casestudy.casestudyimage }}'); background-size: cover; background-position: center; background-repeat: no-repeat;">
                    {% else %}
                        <div class="card card-blue-margin h-100 w-100" style="background-image: url('{% static 'images/default.png' %}'); background-size: cover; background-position: center; background-repeat: no-repeat;">
                    {% endif %}
                        <!-- Layout with solid background left side and white right side -->
                        <div class="card-overlay" style="height: 100%; width: 100%; display: flex;">
                            <div class="card-left" style="flex: 0 0 50%; max-width: 50%; display: flex; align-items: flex-start; justify-content: center; padding: 0; height: 100%; overflow: hidden; background: rgba(255, 255, 255, 0.95);">
                                <!-- Optimized image with lazy loading, performance hints, and hover effect -->
                                {% if casestudy.casestudyimage %}
                                    <img src="{% static 'images/' %}{{ casestudy.casestudyimage }}" 
                                         alt="{{ casestudy.title }} case study image" 
                                         class="img-fluid case-study-image" 
                                         style="width: 100%; height: auto; display: block; margin: 0; border-radius: 8px 0 8px 0; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"
                                         loading="lazy"
                                         decoding="async"
                                         fetchpriority="low">
                                {% else %}
                                    <img src="{% static 'images/default.png' %}" 
                                         alt="Default case study image" 
                                         class="img-fluid case-study-image" 
                                         style="width: 100%; height: auto; display: block; margin: 0; border-radius: 8px 0 8px 0; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"
                                         loading="lazy"
                                         decoding="async"
                                         fetchpriority="low">
                                {% endif %}
                            </div>
                            <div class="card-right d-flex flex-column" style="flex: 0 0 50%; max-width: 50%; padding: 10px; display: flex; flex-direction: column; justify-content: center; height: 100%; background: rgba(255, 255, 255, 0.95);">
                                <div class="card-title-strip">
                                    <a href="{% url 'casestudy_detail' casestudy.slug %}" class="casestudy-link">                                                       
                                        <h2>{{ casestudy.title }}</h2>
                                    </a>                               
                                </div>   
                                <p class="flex-grow-1">{{ casestudy.excerpt }}</p>                         
                                <ul class="mt-auto">
                                    <li><strong><i class="fas fa-user"></i>  Client:</strong> {{ casestudy.client }}</li>
                                    <li><strong><i class="fas fa-map-marker-alt"></i>  Location:</strong> {{ casestudy.location }}</li>
                                    <li><strong><i class="fas fa-industry"></i>  Industry:</strong> {{ casestudy.industry }}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% if is_paginated %}
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a href="?page={{ page_obj.previous_page_number }}" class="page-link">&laquo; PREV</a>
            </li>
        {% endif %}
        {% if page_obj.has_next %}
            <li class="page-item">
                <a href="?page={{ page_obj.next_page_number }}" class="page-link">NEXT &raquo;</a>
            </li>
        {% endif %}
    </ul>
    {% endif %}
</div>

<!-- index.html content ends here -->
{% endblock %}